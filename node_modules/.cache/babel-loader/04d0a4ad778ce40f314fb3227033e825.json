{"ast":null,"code":"var _jsxFileName = \"/Users/akashaki/personalProjects/AdminPanel/src/components/events/Events.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport config from '../../config.json';\nimport EventsTableItem from './EventsTableItem';\nimport Create from './Create';\nimport EventPage from './EventPage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Events() {\n  _s();\n\n  const [events, setEvents] = useState([]);\n  const [options, setOptions] = useState(0);\n  const [details, setDetails] = useState({});\n  const [types, setTypes] = useState([]);\n  const [selectedEvent, setSelectedEvent] = useState(\"\");\n  const [eventPageOptions, setEventPageOptions] = useState(0);\n  const [members, setMembers] = useState([]);\n  let key = JSON.parse(localStorage.getItem(\"apiKey\"));\n  let url = config.baseUrl + \"/api/events\";\n  let typesUrl = config.baseUrl + \"/api/types\";\n  console.log(\"akash I am here\"); // let membersUrl = config.baseUrl+\"/api/members\"\n\n  let fetchData = async url => {\n    let response = await fetch(url, {\n      method: 'GET',\n      // *GET, POST, PUT, DELETE, etc.\n      mode: 'cors',\n      // no-cors, *cors, same-origin\n      cache: 'no-cache',\n      // *default, no-cache, reload, force-cache, only-if-cached\n      // credentials: 'include', // include, *same-origin, omit\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\": key //   'Content-Type': 'application/x-www-form-urlencoded',\n\n      }\n    });\n    let resp = await response.json();\n    return resp;\n  };\n\n  let postData = async url => {\n    let response = await fetch(url, {\n      method: 'POST',\n      // *GET, POST, PUT, DELETE, etc.\n      mode: 'cors',\n      // no-cors, *cors, same-origin\n      cache: 'no-cache',\n      // *default, no-cache, reload, force-cache, only-if-cached\n      // credentials: 'include', // include, *same-origin, omit\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\": key //   'Content-Type': 'application/x-www-form-urlencoded',\n\n      },\n      body: JSON.stringify(details)\n    });\n    let resp = await response.json();\n    return resp;\n  };\n\n  let putData = async url => {\n    let response = await fetch(url, {\n      method: 'PUT',\n      // *GET, POST, PUT, DELETE, etc.\n      mode: 'cors',\n      // no-cors, *cors, same-origin\n      cache: 'no-cache',\n      // *default, no-cache, reload, force-cache, only-if-cached\n      // credentials: 'include', // include, *same-origin, omit\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\": key //   'Content-Type': 'application/x-www-form-urlencoded',\n\n      },\n      body: JSON.stringify(details)\n    });\n    let resp = await response.json();\n    return resp;\n  };\n\n  let deleteData = async id => {\n    let response = await fetch(url + \"/\" + id, {\n      method: 'DELETE',\n      mode: 'cors',\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\": key\n      }\n    });\n    setEvents(events.filter(event => event._id !== id));\n  };\n\n  useEffect(() => {\n    fetchData(url + \"/all\").then(async response => {\n      console.log(\"response\", response);\n\n      if (response.success) {\n        console.log(response.response);\n        let resp = response.response;\n        setEvents(resp);\n      } else {\n        console.log(\"unable to fetch data!\");\n      }\n    });\n  }, []);\n  useEffect(() => {\n    fetchData(typesUrl + \"/all\").then(async response => {\n      console.log(\"response\", response);\n\n      if (response.success) {\n        console.log(response.response);\n        setTypes(response.response);\n      } else {\n        console.log(\"unable to fetch data!\");\n      }\n    });\n  }, []);\n\n  let submitHandler = e => {\n    e.preventDefault();\n    console.log(\"This is here\", events);\n    postData(url + \"/create\").then(async response => {\n      if (response.success) {\n        setEvents([...events, response.response]);\n        e.target.name.value = null;\n        e.target.type.value = \"\";\n        e.target.price.value = 0;\n        e.target.description.value = null;\n        setDetails({});\n        setOptions(0);\n      } else {\n        console.log(response);\n        console.log(\"Cannot create\");\n      }\n    });\n  };\n\n  let editHandler = e => {\n    e.preventDefault();\n    console.log(\"This is here\", events);\n    putData(url + \"/\" + selectedEvent._id).then(async response => {\n      if (response.success) {\n        let newEvents = [];\n        events.forEach(event => {\n          if (event._id == selectedEvent._id) {\n            newEvents.push(response.response);\n          } else {\n            newEvents.push(event);\n          }\n        });\n        setEvents(newEvents);\n        setDetails({});\n      } else {\n        console.log(response);\n        console.log(\"Cannot create\");\n      }\n\n      fetchData(url + \"/all\").then(async response => {\n        console.log(\"response\", response);\n\n        if (response.success) {\n          console.log(response.response);\n          let resp = response.response;\n          setEvents(resp);\n          setSelectedEvent(se);\n        } else {\n          console.log(\"unable to fetch data!\");\n        }\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-fluid\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"col-6 btn btn-link\",\n        onClick: () => setOptions(0),\n        children: \"All Events\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"col-6 btn btn-link\",\n        onClick: () => setOptions(1),\n        children: \"Create Event\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 17\n    }, this), options == 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      width: \"100%\",\n      children: events.map(event => /*#__PURE__*/_jsxDEV(EventsTableItem, {\n        item: event,\n        remove: deleteData,\n        setSelectedEvent: setSelectedEvent,\n        deleteUrl: url,\n        setOptions: setOptions\n      }, event._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 30\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), options == 1 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Create Event\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 32\n      }, this), /*#__PURE__*/_jsxDEV(Create, {\n        submitHandler: submitHandler,\n        setDetails: setDetails,\n        details: details,\n        types: types\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 53\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), options == 3 ? /*#__PURE__*/_jsxDEV(EventPage, {\n      options: eventPageOptions,\n      setOptions: setEventPageOptions,\n      editHandler: editHandler,\n      event: selectedEvent,\n      deleteEvent: deleteData,\n      setPageOptions: setOptions,\n      types: types,\n      details: details,\n      setDetails: setDetails\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 30\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Events, \"57sZW/4m4fDpFhGLnHvPB0St+rk=\");\n\n_c = Events;\nexport default Events;\n\nvar _c;\n\n$RefreshReg$(_c, \"Events\");","map":{"version":3,"sources":["/Users/akashaki/personalProjects/AdminPanel/src/components/events/Events.js"],"names":["React","useState","useEffect","config","EventsTableItem","Create","EventPage","Events","events","setEvents","options","setOptions","details","setDetails","types","setTypes","selectedEvent","setSelectedEvent","eventPageOptions","setEventPageOptions","members","setMembers","key","JSON","parse","localStorage","getItem","url","baseUrl","typesUrl","console","log","fetchData","response","fetch","method","mode","cache","headers","resp","json","postData","body","stringify","putData","deleteData","id","filter","event","_id","then","success","submitHandler","e","preventDefault","target","name","value","type","price","description","editHandler","newEvents","forEach","push","se","map"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport config from '../../config.json'\nimport EventsTableItem from './EventsTableItem'\nimport Create from './Create'\nimport EventPage from './EventPage'\n\n\nfunction Events() {\n\n    const [events, setEvents] = useState([])\n    const [options, setOptions] = useState(0)\n    const [details, setDetails] = useState({})\n    const [types, setTypes] = useState([])\n    const [selectedEvent, setSelectedEvent] = useState(\"\")\n    const [eventPageOptions, setEventPageOptions] = useState(0)\n\n    const [members, setMembers] = useState([])\n\n    let key = JSON.parse(localStorage.getItem(\"apiKey\"))\n\n    let url = config.baseUrl+\"/api/events\"\n    let typesUrl = config.baseUrl+\"/api/types\"\n    console.log(\"akash I am here\");\n    // let membersUrl = config.baseUrl+\"/api/members\"\n\n    let fetchData = async(url) =>{\n        let response = await fetch(url, {\n            method: 'GET', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            // credentials: 'include', // include, *same-origin, omit\n            headers: {\n              'Content-Type': 'application/json',\n              \"Authorization\": key\n            //   'Content-Type': 'application/x-www-form-urlencoded',\n            },\n          })\n        let resp = await response.json()\n        return resp\n    }\n\n    let postData = async(url) =>{\n        let response = await fetch(url, {\n            method: 'POST', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            // credentials: 'include', // include, *same-origin, omit\n            headers: {\n              'Content-Type': 'application/json',\n              \"Authorization\": key\n            //   'Content-Type': 'application/x-www-form-urlencoded',\n            },\n            body: JSON.stringify(details)\n          })\n        let resp = await response.json()\n        return resp\n    }\n\n    let putData = async(url) =>{\n        let response = await fetch(url, {\n            method: 'PUT', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            // credentials: 'include', // include, *same-origin, omit\n            headers: {\n              'Content-Type': 'application/json',\n              \"Authorization\": key\n            //   'Content-Type': 'application/x-www-form-urlencoded',\n            },\n            body: JSON.stringify(details)\n          })\n        let resp = await response.json()\n        return resp\n    }\n\n    let deleteData = async(id) => {\n        let response = await fetch(url+\"/\"+id, {\n            method: 'DELETE',\n            mode: 'cors',\n            headers: {\n                'Content-Type': 'application/json',\n                \"Authorization\": key\n            }\n        })\n        setEvents(events.filter((event)=>event._id!==id))\n    }\n\n    useEffect(()=>{\n        fetchData(url+\"/all\").then(async(response)=>{\n            console.log(\"response\",response)\n            if (response.success){\n                console.log(response.response)\n                let resp = response.response\n                setEvents(resp)\n            } else {\n                console.log(\"unable to fetch data!\")\n            }\n            \n        })\n    }, [])\n\n    useEffect(()=>{\n        fetchData(typesUrl+\"/all\").then(async(response)=>{\n            console.log(\"response\",response)\n            if (response.success){\n                console.log(response.response)\n                setTypes(response.response)\n            } else {\n                console.log(\"unable to fetch data!\")\n            }\n            \n        })\n    }, [])\n\n    let submitHandler = (e) => {\n        e.preventDefault();\n        console.log(\"This is here\",events)\n        postData(url+\"/create\").then(async(response)=> {\n            if(response.success) {\n                setEvents([...events,response.response])\n                e.target.name.value = null\n                e.target.type.value = \"\"\n                e.target.price.value = 0\n                e.target.description.value = null\n                setDetails({})\n                setOptions(0)\n            } else {\n                console.log(response)\n                console.log(\"Cannot create\")\n            }\n            \n        })\n    }\n\n    let editHandler = (e) => {\n        e.preventDefault();\n        console.log(\"This is here\",events)\n        putData(url+\"/\"+selectedEvent._id).then(async(response)=> {\n            if(response.success) {\n                let newEvents = []\n                events.forEach((event) => {\n                    if (event._id == selectedEvent._id) {\n                        newEvents.push(response.response)\n                    } else {\n                        newEvents.push(event)\n                    }\n                })\n                setEvents(newEvents)\n                setDetails({})\n            } else {\n                console.log(response)\n                console.log(\"Cannot create\")\n            }\n            fetchData(url+\"/all\").then(async(response)=>{\n                console.log(\"response\",response)\n                if (response.success){\n                    console.log(response.response)\n                    let resp = response.response\n                    setEvents(resp)\n                    setSelectedEvent(se)\n                } else {\n                    console.log(\"unable to fetch data!\")\n                }\n                \n            })\n        })\n    }\n\n    return (\n        <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <button className=\"col-6 btn btn-link\" onClick={()=>setOptions(0)}>All Events</button>\n                    <button className=\"col-6 btn btn-link\" onClick={()=>setOptions(1)}>Create Event</button>\n                </div>\n                {options==0? <div className=\"container\" width=\"100%\">{events.map((event) => \n                <EventsTableItem key={event._id} item={event} remove={deleteData} setSelectedEvent={setSelectedEvent} deleteUrl={url} setOptions={setOptions}></EventsTableItem>\n                )}</div>:<></>}\n                {options==1? <><h1>Create Event</h1><Create submitHandler={submitHandler} setDetails={setDetails} details={details} types={types}></Create></>:<></>}   \n                {options==3? <EventPage options={eventPageOptions} setOptions={setEventPageOptions} editHandler={editHandler} event={selectedEvent} deleteEvent={deleteData} setPageOptions={setOptions} types={types} details={details} setDetails={setDetails}></EventPage>:<></>}\n        </div>)\n}\n\nexport default Events"]},"metadata":{},"sourceType":"module"}