{"ast":null,"code":"var _jsxFileName = \"/Users/akashaki/personalProjects/AdminPanel/src/components/events/Register.js\",\n    _s = $RefreshSig$();\n\nimport { useRef, useState } from \"react\";\nimport config from '../../config.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Register({\n  event,\n  setEvent\n}) {\n  _s();\n\n  console.log(\"i am here\");\n  let form = useRef(null);\n  let user = JSON.parse(localStorage.getItem(\"user\"));\n  const [details, setDetails] = useState({});\n  const [image, setImage] = useState();\n\n  const handleImageUpload = event => {\n    console.log(\"inside onChange!\");\n    const files = event.target.files;\n    console.log(files[0]);\n    const formData = new FormData();\n    formData.append('imgFile', files[0]);\n  };\n\n  let imageUrl = config.baseUrl + \"/api/images\";\n\n  let imageSubmitHandler = e => {\n    // console.log(\"current form:\",e.target.imgFIle)\n    let formData = new FormData(e.target);\n    e.target.imgFile.value = null; // console.log(formData, \"here is the form\")\n\n    e.preventDefault();\n    console.log(\"This is here\", details);\n    postImageData(imageUrl + \"/create\", formData).then(async response => {\n      console.log(\"akashaki ::\", response);\n\n      if (response.success) {\n        setImage(response.response._id);\n      } else {\n        console.log(response);\n        console.log(\"Cannot create\");\n      }\n    });\n  };\n\n  let postImageData = async (url, formData) => {\n    console.log(formData);\n    let response = await fetch(url, {\n      method: 'POST',\n      // *GET, POST, PUT, DELETE, etc.\n      mode: 'cors',\n      // no-cors, *cors, same-origin\n      cache: 'no-cache',\n      // *default, no-cache, reload, force-cache, only-if-cached\n      // credentials: 'include', // include, *same-origin, omit\n      headers: {\n        //   'Content-Type': 'multipart/form-data',\n        \"Authorization\": JSON.parse(user.accesstoken) //   'Content-Type': 'application/x-www-form-urlencoded',\n\n      },\n      body: formData\n    });\n    let resp = await response.json();\n    return resp;\n  };\n\n  let transactionUrl = config.baseUrl + \"/api/transactions\";\n  let eventUrl = config.baseUrl + \"/api/events\";\n\n  let submitHandler = async () => {\n    let data = {\n      member: user.id,\n      image: image._id\n    };\n    let response = await fetch(transactionUrl + \"/create\", {\n      method: 'POST',\n      // *GET, POST, PUT, DELETE, etc.\n      mode: 'cors',\n      // no-cors, *cors, same-origin\n      cache: 'no-cache',\n      // *default, no-cache, reload, force-cache, only-if-cached\n      // credentials: 'include', // include, *same-origin, omit\n      headers: {\n        'Content-Type': 'application/json',\n        \"Authorization\": JSON.parse(user.accesstoken) //   'Content-Type': 'application/x-www-form-urlencoded',\n\n      },\n      body: JSON.stringify(data)\n    });\n\n    if (response.success) {\n      const registration = {\n        member: user.id,\n        transaction: response.response._id,\n        confirm: false\n      };\n      let registrations = [];\n      event.registrations.forEach(registration => {\n        registrations.push(registration);\n      });\n      registrations.push(registration);\n      let data = response = await fetch(eventUrl + \"/\" + event._id, {\n        method: 'PUT',\n        // *GET, POST, PUT, DELETE, etc.\n        mode: 'cors',\n        // no-cors, *cors, same-origin\n        cache: 'no-cache',\n        // *default, no-cache, reload, force-cache, only-if-cached\n        // credentials: 'include', // include, *same-origin, omit\n        headers: {\n          'Content-Type': 'application/json',\n          \"Authorization\": JSON.parse(user.accesstoken) //   'Content-Type': 'application/x-www-form-urlencoded',\n\n        },\n        body: JSON.stringify(data)\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: [\"Please pay \", event.price, \" in the below UPI link and attach screenshot to register\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"upi://pay?pa=\" + event.upiId,\n        children: event.upiId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"user\",\n      ref: form,\n      onSubmit: imageSubmitHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          name: \"imgFile\",\n          className: \"form-control-user\",\n          id: \"exampleInputEmail\",\n          \"aria-describedby\": \"emailHelp\",\n          onChange: event => handleImageUpload(event),\n          placeholder: \"Enter Service Name...\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        onSubmit: imageSubmitHandler,\n        className: \"btn btn-primary btn-user btn-block\",\n        children: \"Upload Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"user\",\n      ref: form,\n      onSubmit: submitHandler,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        onSubmit: submitHandler,\n        className: \"btn btn-primary btn-user btn-block\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Register, \"yDuKEQcVc2FuypQBI4q/S6NwSwQ=\");\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["/Users/akashaki/personalProjects/AdminPanel/src/components/events/Register.js"],"names":["useRef","useState","config","Register","event","setEvent","console","log","form","user","JSON","parse","localStorage","getItem","details","setDetails","image","setImage","handleImageUpload","files","target","formData","FormData","append","imageUrl","baseUrl","imageSubmitHandler","e","imgFile","value","preventDefault","postImageData","then","response","success","_id","url","fetch","method","mode","cache","headers","accesstoken","body","resp","json","transactionUrl","eventUrl","submitHandler","data","member","id","stringify","registration","transaction","confirm","registrations","forEach","push","price","upiId"],"mappings":"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","sourcesContent":["import { useRef, useState } from \"react\";\nimport config from '../../config.json'\n\nfunction Register ({event, setEvent}) {\n    console.log(\"i am here\")\n    let form = useRef(null)\n    let user = JSON.parse(localStorage.getItem(\"user\"));\n    const [details, setDetails] = useState({});\n    const [image, setImage] = useState();\n    \n    \n    const handleImageUpload = event => {\n        console.log(\"inside onChange!\")\n        const files = event.target.files\n        console.log(files[0])\n        const formData = new FormData()\n        formData.append('imgFile', files[0])\n      }\n    \n    \n    let imageUrl = config.baseUrl+\"/api/images\"\n    \n    \n    let imageSubmitHandler = (e) => {\n        // console.log(\"current form:\",e.target.imgFIle)\n        let formData = new FormData(e.target)\n        e.target.imgFile.value = null\n        // console.log(formData, \"here is the form\")\n        e.preventDefault();\n        console.log(\"This is here\",details)\n        postImageData(imageUrl+\"/create\", formData).then(async(response)=> {\n            console.log(\"akashaki ::\", response)\n            if(response.success) {\n                setImage(response.response._id)\n            } else {\n                console.log(response)\n                console.log(\"Cannot create\")\n            }\n        })\n        \n       \n    }\n\n    let postImageData = async(url, formData) =>{\n        console.log(formData)\n        let response = await fetch(url, {\n            method: 'POST', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            // credentials: 'include', // include, *same-origin, omit\n            headers: {\n            //   'Content-Type': 'multipart/form-data',\n              \"Authorization\": JSON.parse(user.accesstoken)\n            //   'Content-Type': 'application/x-www-form-urlencoded',\n            },\n            body: formData\n          })\n        let resp = await response.json()\n        return resp\n    }\n\n    let transactionUrl = config.baseUrl+\"/api/transactions\"\n    let eventUrl = config.baseUrl + \"/api/events\"\n\n    let submitHandler = async() => {\n        let data = {\n            member: user.id,\n            image: image._id\n        }\n        let response = await fetch(transactionUrl+\"/create\", {\n            method: 'POST', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            // credentials: 'include', // include, *same-origin, omit\n            headers: {\n              'Content-Type': 'application/json',\n              \"Authorization\": JSON.parse(user.accesstoken)\n            //   'Content-Type': 'application/x-www-form-urlencoded',\n            },\n            body: JSON.stringify(data)\n        })\n        if (response.success) {\n            const registration = {\n                member: user.id,\n                transaction: response.response._id,\n                confirm: false\n            }\n            let registrations = []\n            event.registrations.forEach((registration)=> {\n                registrations.push(registration)\n            })\n            registrations.push(registration)\n            let data = \n            response = await fetch(eventUrl+\"/\"+event._id, {\n                method: 'PUT', // *GET, POST, PUT, DELETE, etc.\n                mode: 'cors', // no-cors, *cors, same-origin\n                cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n                // credentials: 'include', // include, *same-origin, omit\n                headers: {\n                  'Content-Type': 'application/json',\n                  \"Authorization\": JSON.parse(user.accesstoken)\n                //   'Content-Type': 'application/x-www-form-urlencoded',\n                },\n                body: JSON.stringify(data)\n            })\n        }\n    }\n\n\n    return <>\n        <br></br>\n        <h4>Please pay {event.price} in the below UPI link and attach screenshot to register</h4>\n        <h3><a href={\"upi://pay?pa=\"+event.upiId}>{event.upiId}</a></h3>\n        <form className=\"user\" ref={form} onSubmit={imageSubmitHandler}>\n                        <div className=\"form-group\">\n                            <input type=\"file\" name=\"imgFile\" className=\"form-control-user\"\n                                id=\"exampleInputEmail\" aria-describedby=\"emailHelp\" onChange={event => handleImageUpload(event)}\n                                placeholder=\"Enter Service Name...\" required></input>\n                        </div>\n                        <button type=\"submit\" onSubmit={imageSubmitHandler} className=\"btn btn-primary btn-user btn-block\">\n                            Upload Image\n                        </button>\n        </form>\n        <form className=\"user\" ref={form} onSubmit={submitHandler}>\n                        <button type=\"submit\" onSubmit={submitHandler} className=\"btn btn-primary btn-user btn-block\">\n                            Submit\n                        </button>\n        </form>\n    </>\n\n\n}\n\nexport default Register"]},"metadata":{},"sourceType":"module"}