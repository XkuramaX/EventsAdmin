(this.webpackJsonpsmarthome=this.webpackJsonpsmarthome||[]).push([[0],{29:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(22),s=n.n(r),o=(n(29),n(2)),i=n.n(o),l=n(3),u=n(5),d=n(12),j=n(0);var b=function(e){var t=e.Logout;return Object(j.jsxs)("ul",{className:"navbar-nav bg-gradient-primary sidebar sidebar-dark accordion",id:"accordionSidebar",children:[Object(j.jsxs)(d.b,{className:"sidebar-brand d-flex align-items-center justify-content-center",to:"/",children:[Object(j.jsx)("div",{className:"sidebar-brand-icon rotate-n-15",children:Object(j.jsx)("i",{className:"fas fa-laugh-wink"})}),Object(j.jsx)("div",{className:"sidebar-brand-text mx-3",children:"Desilane Admin"})]}),Object(j.jsx)("hr",{className:"sidebar-divider my-0"}),Object(j.jsx)("li",{className:"nav-item active",children:Object(j.jsxs)(d.b,{className:"nav-link",to:"/",children:[Object(j.jsx)("i",{className:"fas fa-fw fa-tachometer-alt"}),Object(j.jsx)("span",{children:"Dashboard"})]})}),Object(j.jsx)("hr",{className:"sidebar-divider"}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)(d.b,{className:"nav-link",to:"/leads",children:[Object(j.jsx)("i",{className:"fas fa-fw fa-cog"}),Object(j.jsx)("span",{children:"Leads"})]})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)(d.b,{className:"nav-link",to:"/images",children:[Object(j.jsx)("i",{className:"fas fa-fw fa-cog"}),Object(j.jsx)("span",{children:"Menu"})]})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)(d.b,{className:"nav-link",to:"/images2",children:[Object(j.jsx)("i",{className:"fas fa-fw fa-cog"}),Object(j.jsx)("span",{children:"Menu2"})]})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsxs)(d.b,{className:"nav-link",onClick:t,to:"/",children:[Object(j.jsx)("i",{className:"fas fa-fw fa-cog"}),Object(j.jsx)("span",{children:"Logout"})]})})]})};n(40),n(41),n(42);var h=function(){return Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("h1",{children:"Hello Admin!"}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-lg-6 mb-4",children:Object(j.jsx)("h3",{children:"Welcome to the Admin Panel of Desi Lane. Everything is linked, paginated and customizable in this website. Take every action very carefully as it will be directly reflected on the main page!"})})})]})},p=n(4),m=n(6);var f=function(e){var t=e.item,n=e.remove,c=e.accept;return console.log(t),Object(j.jsx)("div",{className:"card",children:Object(j.jsxs)("div",{className:"card-body row",children:[Object(j.jsx)("div",{className:"col-4",children:Object(j.jsxs)("p",{children:[Object(j.jsx)("strong",{children:"Name"})," : ",t.first_name]})}),Object(j.jsx)("div",{className:"col-4",children:Object(j.jsxs)("p",{children:[Object(j.jsx)("strong",{children:"Phone"})," : ",t.phone_number]})}),Object(j.jsx)("div",{className:"col-4",children:Object(j.jsxs)("p",{children:[Object(j.jsx)("strong",{children:"Address"})," : ",t.address]})}),Object(j.jsxs)("div",{className:"col-4",children:[c?Object(j.jsx)("button",{className:"btn btn-success",onClick:function(){c(t)},children:"Accept"}):"",Object(j.jsx)("button",{className:"btn btn-danger",onClick:function(){n(t)},children:"Delete"})]})]})})},O=n(24),x=n.n(O);var g=function(e){var t=m.baseUrl+"/api/lead",n=m.baseUrl+"/api/lead/all",a=Object(c.useState)([]),r=Object(u.a)(a,2),s=r[0],o=r[1],d=Object(c.useState)({count:0,current:0,totalPage:0}),b=Object(u.a)(d,2),h=b[0],O=b[1],g=JSON.parse(localStorage.getItem("apiKey")),v=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:g}});case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"DELETE",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:g}});case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=Object(c.useState)([]),w=Object(u.a)(y,2),k=w[0],S=w[1];function C(e){return E.apply(this,arguments)}function E(){return(E=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],t.map((function(e){var t={};t.Name=e.first_name,t.Phone=e.phone_number,n.push(t)})),S(n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return D.apply(this,arguments)}function D(){return(D=Object(l.a)(i.a.mark((function e(n){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t+"/"+n._id);case 2:e.sent.success?(o(s.filter((function(e){return e._id!==n._id}))),console.log("remove"),c=h.current,(h.count-1)%50===0&&h.current===parseInt((h.count-1)/50)&&(c-=1),h.count%50&&h.totalPage!=parseInt((h.count-1)/50)&&(h.totalPage-=1),O({count:h.count-1,current:c})):console.log("Cannot delete");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0!=h.current&&O(Object(p.a)(Object(p.a)({},h),{},{current:h.current-1})),console.log(h);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.current<h.totalPage&&O(Object(p.a)(Object(p.a)({},h),{},{current:h.current+1})),console.log(h);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){v(n+"?page="+h.current).then((function(e){if(console.log(e),e.success){C(e.response),console.log("success",e),o(e.response);var t=h.current,n=parseInt(e.count/50);e.count%50&&(n+=1),O({count:e.count,current:t,totalPage:n})}else console.log(e)}))}),[]),Object(c.useEffect)((function(){v(n+"?page="+h.current).then((function(e){e.success?(console.log("success",e),C(e.response),o(e.response)):console.log(e)}))}),[h]),Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("h1",{className:"h3 mb-2 text-gray-800 heading",children:"Leads Table"})," ",Object(j.jsx)(x.a,{data:k}),Object(j.jsxs)("div",{className:"card shadow mb-4",children:[Object(j.jsx)("div",{className:"card-header py-3",children:Object(j.jsx)("h6",{className:"m-0 font-weight-bold text-primary",children:"Leads"})}),Object(j.jsx)("div",{className:"container",width:"100%",children:s.map((function(e){return Object(j.jsx)(f,{item:e,remove:T},e._id)}))}),Object(j.jsx)("nav",{"aria-label":"...",children:Object(j.jsxs)("ul",{className:"pagination",children:[Object(j.jsx)("li",{className:"page-item",children:Object(j.jsx)("button",{className:"page-link",onClick:function(){!function(){P.apply(this,arguments)}()},children:"Prev"})}),Object(j.jsx)("li",{className:"page-item",children:Object(j.jsx)("button",{className:"page-link",onClick:function(){!function(){I.apply(this,arguments)}()},children:"Next"})})]})})]})]})};n(14);var v=function(e){var t=e.item,n=e.remove;return console.log("here",t),Object(j.jsxs)("tr",{className:"row",children:[Object(j.jsx)("td",{className:"col-6",children:Object(j.jsx)("a",{onClick:function(){window.location.href=m.baseUrl+"/"+t.url},children:"Click Here to view the menu card"})}),Object(j.jsx)("td",{className:"col-3",children:Object(j.jsx)("button",{className:"btn btn-danger",onClick:function(){n(t)},children:"Delete"})})]})};var N=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)({url:""}),s=Object(u.a)(r,2),o=s[0],d=(s[1],Object(c.useState)({count:0,current:0,totalPage:0})),b=Object(u.a)(d,2),h=b[0],p=b[1],f=Object(c.useRef)(null),O=JSON.parse(localStorage.getItem("apiKey")),x=m.baseUrl+"/api/image",g=(new FormData,function(){var e=Object(l.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:O}});case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var c,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",headers:{Authorization:O},body:n});case 3:return c=e.sent,e.next=6,c.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json",Authorization:O}});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function w(e){return k.apply(this,arguments)}function k(){return(k=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(x+"/"+t._id).then((function(){a(n.filter((function(e){return e._id!==t._id}))),console.log("Delete is being called!",t._id)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){g(x+"/all?page="+h.current).then(function(){var e=Object(l.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("response",t),t.success?(console.log(t.response),a(t.response),n=h.current,c=parseInt(t.count/9),t.count%9&&(c+=1),p({count:t.count,current:n,totalPage:c})):console.log("unable to fetch data!");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[o]),Object(c.useEffect)((function(){g(x+"/all?page="+h.current).then((function(e){e.success?(console.log("success",e),a(e.response)):console.log(e)}))}),[h]);var S=function(e){var t=new FormData(e.target);e.target.imgFile.value=null,e.preventDefault(),console.log("This is here",o),N(x+"/create",t).then(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.success?a([t.response]):(console.log(t),console.log("Cannot create"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log(o)};return Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("h1",{className:"h3 mb-2 text-gray-800 heading",children:"Upload the menu card in .pdf format"}),Object(j.jsxs)("form",{className:"user",ref:f,onSubmit:S,children:[Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{type:"file",name:"imgFile",className:"form-control-user",id:"exampleInputEmail","aria-describedby":"emailHelp",onChange:function(e){return function(e){console.log("inside onChange!");var t=e.target.files;console.log(t[0]),(new FormData).append("imgFile",t[0])}(e)},placeholder:"Enter Service Name...",required:!0})}),Object(j.jsx)("button",{type:"submit",onSubmit:S,className:"btn btn-primary btn-user btn-block",children:"Upload"})]}),Object(j.jsx)("h1",{className:"h3 mb-2 text-gray-800 heading",children:"Menu"}),Object(j.jsxs)("div",{className:"card shadow mb-4",children:[Object(j.jsx)("div",{className:"card-header py-3",children:Object(j.jsx)("h6",{className:"m-0 font-weight-bold text-primary",children:"Current"})}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("table",{cellspacing:"0",children:n.map((function(e){return Object(j.jsx)(v,{item:e,remove:w},e._id)}))})})]})]})};var y=function(e){var t=e.item,n=e.remove;return console.log("here",t),Object(j.jsxs)("tr",{className:"row",children:[Object(j.jsx)("td",{className:"col-6",children:Object(j.jsx)("a",{onClick:function(){window.location.href=m.baseUrl+"/"+t.url},children:"Click Here to view the menu card"})}),Object(j.jsx)("td",{className:"col-3",children:Object(j.jsx)("button",{className:"btn btn-danger",onClick:function(){n(t)},children:"Delete"})})]})};var w=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)({url:""}),s=Object(u.a)(r,2),o=s[0],d=(s[1],Object(c.useState)({count:0,current:0,totalPage:0})),b=Object(u.a)(d,2),h=b[0],p=b[1],f=Object(c.useRef)(null),O=JSON.parse(localStorage.getItem("apiKey")),x=m.baseUrl+"/api/image2",g=(new FormData,function(){var e=Object(l.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:O}});case 2:return n=e.sent,e.next=5,n.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var c,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.next=3,fetch(t,{method:"POST",mode:"cors",cache:"no-cache",headers:{Authorization:O},body:n});case 3:return c=e.sent,e.next=6,c.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json",Authorization:O}});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function w(e){return k.apply(this,arguments)}function k(){return(k=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(x+"/"+t._id).then((function(){a(n.filter((function(e){return e._id!==t._id}))),console.log("Delete is being called!",t._id)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(c.useEffect)((function(){g(x+"/all?page="+h.current).then(function(){var e=Object(l.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("response",t),t.success?(console.log(t.response),a(t.response),n=h.current,c=parseInt(t.count/9),t.count%9&&(c+=1),p({count:t.count,current:n,totalPage:c})):console.log("unable to fetch data!");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[o]),Object(c.useEffect)((function(){g(x+"/all?page="+h.current).then((function(e){e.success?(console.log("success",e),a(e.response)):console.log(e)}))}),[h]);var S=function(e){var t=new FormData(e.target);e.target.imgFile.value=null,e.preventDefault(),console.log("This is here",o),v(x+"/create",t).then(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.success?a([t.response]):(console.log(t),console.log("Cannot create"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log(o)};return Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("h1",{className:"h3 mb-2 text-gray-800 heading",children:"Upload the menu card in .pdf format"}),Object(j.jsxs)("form",{className:"user",ref:f,onSubmit:S,children:[Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{type:"file",name:"imgFile",className:"form-control-user",id:"exampleInputEmail","aria-describedby":"emailHelp",onChange:function(e){return function(e){console.log("inside onChange!");var t=e.target.files;console.log(t[0]),(new FormData).append("imgFile",t[0])}(e)},placeholder:"Enter Service Name...",required:!0})}),Object(j.jsx)("button",{type:"submit",onSubmit:S,className:"btn btn-primary btn-user btn-block",children:"Upload"})]}),Object(j.jsx)("h1",{className:"h3 mb-2 text-gray-800 heading",children:"Menu"}),Object(j.jsxs)("div",{className:"card shadow mb-4",children:[Object(j.jsx)("div",{className:"card-header py-3",children:Object(j.jsx)("h6",{className:"m-0 font-weight-bold text-primary",children:"Current"})}),Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("table",{cellspacing:"0",children:n.map((function(e){return Object(j.jsx)(y,{item:e,remove:w},e._id)}))})})]})]})};var k=function(e){var t=e.login,n=(e.logout,Object(c.useState)({username:"",password:""})),a=Object(u.a)(n,2),r=a[0],s=a[1],o=function(e){e.preventDefault(),t(r)};return Object(j.jsx)("div",{className:"container",children:Object(j.jsx)("div",{className:"row justify-content-center",children:Object(j.jsx)("div",{className:"col-xl-10 col-lg-12 col-md-9",children:Object(j.jsx)("div",{className:"card o-hidden border-0 shadow-lg my-5",children:Object(j.jsx)("div",{className:"card-body p-0",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-lg-6 d-none d-lg-block bg-login-image"}),Object(j.jsx)("div",{className:"col-lg-6",children:Object(j.jsxs)("div",{className:"p-5",children:[Object(j.jsx)("div",{className:"text-center",children:Object(j.jsx)("h1",{className:"h4 text-gray-900 mb-4",children:"Welcome Back!"})}),Object(j.jsxs)("form",{className:"user",onSubmit:o,children:[Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{type:"text",name:"username",className:"form-control form-control-user",id:"exampleInputEmail","aria-describedby":"emailHelp",onChange:function(e){s(Object(p.a)(Object(p.a)({},r),{},{username:e.target.value}))},value:r.username,placeholder:"Enter username...",required:!0})}),Object(j.jsx)("div",{className:"form-group",children:Object(j.jsx)("input",{type:"password",name:"password",className:"form-control form-control-user",onChange:function(e){s(Object(p.a)(Object(p.a)({},r),{},{password:e.target.value}))},value:r.password,id:"exampleInputPassword",placeholder:"Password"})}),Object(j.jsx)("button",{type:"submit",onSubmit:o,className:"btn btn-primary btn-user btn-block",children:"Login"})]})]})})]})})})})})})},S=n(7);var C=function(){var e=Object(c.useState)({accesstoken:localStorage.getItem("apiKey")}),t=Object(u.a)(e,2),n=t[0],a=t[1],r=function(){var e=Object(l.a)(i.a.mark((function e(t){var c,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=m.baseUrl+"/api/admin/login",e.next=3,fetch(c,{method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return r=e.sent,e.next=6,r.json();case 6:(s=e.sent).success?(console.log("Success"),console.log("details",t),console.log(t.username),console.log(s.response),a({accesstoken:JSON.stringify(s.response)}),console.log(n),localStorage.setItem("apiKey",JSON.stringify(s.response)),console.log(localStorage.getItem("apiKey"))):console.log(s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){console.log("Log out"),localStorage.removeItem("apiKey"),a({accesstoken:"",username:""})};return Object(j.jsx)("div",{id:"wrapper",children:n.accesstoken?Object(j.jsxs)(d.a,{children:[Object(j.jsx)(b,{Logout:s}),Object(j.jsx)("div",{className:"d-flex flex-column",id:"content-wrapper",children:Object(j.jsx)("div",{id:"content",children:Object(j.jsxs)(S.c,{children:[Object(j.jsx)(S.a,{path:"/",exact:!0,component:h}),Object(j.jsx)(S.a,{path:"/leads",exact:!0,component:g}),Object(j.jsx)(S.a,{path:"/images",exact:!0,component:N}),Object(j.jsx)(S.a,{path:"/images2",exact:!0,component:w})]})})})]}):Object(j.jsx)(k,{login:r,logout:s})})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(C,{})}),document.getElementById("root")),E()},6:function(e){e.exports=JSON.parse('{"baseUrl":"https://api.desilane.co.in"}')}},[[44,1,2]]]);
//# sourceMappingURL=main.60b06454.chunk.js.map